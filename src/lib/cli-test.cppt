#include "cli.h"

@case "parse_options() parses help" {
  const char* argv[] = { "upd", "--help", nullptr };
  auto opts = upd::cli::parse_options(argv);
  @expect(opts.action == upd::cli::action::help);
}

@case "parse_options() throws on invalid options" {
  const char* argv[] = { "upd", "--foobar", nullptr };
  try {
    upd::cli::parse_options(argv);
    @expect(false);
  } catch (upd::cli::unexpected_argument_error error) {
    @expect(error.arg == "--foobar");
  }
}
